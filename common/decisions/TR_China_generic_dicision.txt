WHN_united_policy = {
	china_attack_Independent_warlord = {
		icon = generic_nationalism
        allowed = { can_become_china = yes } 
		available = {    
			has_country_flag = attack_Independent_warlord_allowed   
			OR = {
				is_neighbor_of = FROM
				any_allied_country = { is_neighbor_of = FROM }
				any_subject_country = { is_neighbor_of = FROM }
			}
		}
		visible = {
			is_subject = no
		}
		target_array = global.china_tags_array
		target_trigger = {
			is_neighbor_of = ROOT
			FROM = { is_in_faction = no }
		}
		target_root_trigger = {
			can_declare_war_on = FROM
            is_subject = no
		}

 		cancel_trigger = {
			OR = {
				is_subject = yes
				NOT = { can_declare_war_on = FROM }
			}
		}

		cost = 25
		days_remove = 30

		modifier = {
			
		}

		ai_will_do = {
			factor = 80
			modifier = {
				factor = 0
				has_war = yes
			}
		}

		cancel_effect = {
			clear_decision_attack_AI = yes
		}

		complete_effect = {
			setup_decision_attack_AI = yes
		}

		remove_effect = {
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}
	china_integrate_faction_members = {
		icon = infiltrate_state
		allowed = {
			can_become_china = yes
		}
		available = {
            has_global_flag = war_of_resistance_china_win
			is_neighbor_of = FROM
			received_expeditionary_forces = { sender = FROM value < 1 }
		}
		visible = {
			is_faction_leader = yes
			FROM = { is_ally_with = ROOT }
		}

		target_array = faction_members
		target_array = subjects
		target_root_trigger = {
			is_faction_leader = yes
		}
		target_trigger = {
			is_neighbor_of = FROM
			FROM = { is_chinese_tag = yes }
		}

		cost = 40
		days_remove = 60

		modifier = {
			political_power_cost = 0.25
		}

		ai_will_do = {
			factor = 1000
			modifier = {
				factor = 0
				has_country_flag = integration_underway
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision china_integrate_faction_members target: [From.GetName]"
			set_country_flag = { flag = integration_underway days = 62 value = 1 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_integrate_faction_members target: [From.GetName]"
			FROM = { country_event = TR_China.34 }
		}
	}
}
WHN_militaly_reform = {
	WHN_militaly_reform1 = {

		icon = generic_prepare_civil_war

		available = {
			has_army_experience > 124
		}

		cost = 0
		ai_will_do = {
			factor = 500
		}
		days_remove = 100
		modifier = {
			political_power_gain = -0.25
		}

		visible = {
			OR = {
				has_idea = CHI_late_army
				has_idea = CHI_late_army_1
				has_idea = CHI_late_army_2
                                has_idea = CHI_late_army_3
			}
		}
		remove_effect = {
			if = {
				limit = { has_idea = CHI_late_army }
				swap_ideas = {
					remove_idea = CHI_late_army
					add_idea = CHI_late_army_1
				}
			}
			else_if = {
				limit = { has_idea = CHI_late_army_1 }
				swap_ideas = {
					remove_idea = CHI_late_army_1
					add_idea = CHI_late_army_2
				}
			}
			else_if = {
				limit = { has_idea = CHI_late_army_2 }
				swap_ideas = {
					remove_idea = CHI_late_army_2
					add_idea = CHI_late_army_3
				}
			}
			else_if = {
				limit = { has_idea = CHI_late_army_3 }
				remove_ideas = CHI_late_army_3
			}
		}
		complete_effect = {
			army_experience = -125					
		}		
	}
	CHI_foreign_advisory_group_GER = {

		icon = generic_prepare_civil_war

        allowed = { can_become_china = yes } 
		available = {
                        has_country_flag = foreign_advisory_group_allowed
                        has_socialist_government = yes
		}
		visible = {
                        NOT = { has_idea = foreign_advisory_group }
		}
		targets = { RAT }
		fire_only_once = yes
		cost = 50
		ai_will_do = {
			factor = 80
			modifier = {
				factor = 0
				has_country_flag = foreign_advisory_group_underway
			}
		}
		days_remove = 30
		complete_effect = {
			set_country_flag = { flag = foreign_advisory_group_underway days = 62 value = 1 }
		}
		remove_effect = {
                        add_ideas = foreign_advisory_group
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 500
				producer = RAT
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 50
				producer = RAT
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 50
				producer = RAT
			}
		}		
	}
	CHI_foreign_advisory_group_USA = {

		icon = generic_prepare_civil_war

                allowed = { can_become_china = yes } 
		available = {
			has_country_flag = foreign_advisory_group_allowed 
            has_socialist_government = no
		}
		visible = {
            NOT = { has_idea = foreign_advisory_group }
		}
		targets = { USA }
		fire_only_once = yes
		cost = 50
		ai_will_do = {
			factor = 80
			modifier = {
				factor = 0
				has_country_flag = foreign_advisory_group_underway
			}
		}
		days_remove = 30
		complete_effect = {
			set_country_flag = { flag = foreign_advisory_group_underway days = 62 value = 1 }
		}
		remove_effect = {
                        add_ideas = foreign_advisory_group
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 500
				producer = USA
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 50
				producer = USA
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 50
				producer = USA
			}
		}		
	}
	CHI_foreign_advisory_group_FRA = {

		icon = generic_prepare_civil_war

        allowed = { can_become_china = yes } 
		available = {
            has_country_flag = foreign_advisory_group_allowed 
            has_authoritarian_government = yes
		}
		visible = {
            NOT = { has_idea = foreign_advisory_group }
		}
		targets = { FRA }
		fire_only_once = yes
		cost = 50
		ai_will_do = {
			factor = 80
			modifier = {
				factor = 0
				has_country_flag = foreign_advisory_group_underway
			}
		}
		days_remove = 30
		complete_effect = {
			set_country_flag = { flag = foreign_advisory_group_underway days = 62 value = 1 }
		}
		remove_effect = {
                        add_ideas = foreign_advisory_group
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 500
				producer = FRA
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 50
				producer = FRA
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 50
				producer = FRA
			}
		}		
	}
	CHI_foreign_advisory_group_JAP = {

		icon = generic_prepare_civil_war

        allowed = { can_become_china = yes } 
		available = {
            has_country_flag = foreign_advisory_group_allowed 
            has_country_flag = japanese_support_government
		}
		visible = {
            NOT = { has_idea = foreign_advisory_group }
		}
		targets = { JAP }
		fire_only_once = yes
		cost = 50
		ai_will_do = {
			factor = 80
			modifier = {
				factor = 0
				has_country_flag = foreign_advisory_group_underway
			}
		}
		days_remove = 30
		complete_effect = {
			set_country_flag = { flag = foreign_advisory_group_underway days = 62 value = 1 }
		}
		remove_effect = {
                        add_ideas = foreign_advisory_group
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 500
				producer = JAP
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 50
				producer = JAP
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 50
				producer = JAP
			}
		}		
	}
	CHI_Weapon_purchase_infantry_equipment_canton = {

		icon = generic_prepare_civil_war

        allowed = { can_become_china = yes } 
		available = {
            has_country_flag = Weapon_purchase_allowed 
		}
		visible = {
			NOT = { has_war_with = JAP }
			NOT = { has_war_with = GND }
		}
		targets = { GND }
		target_trigger = {
			GND = { 
			    has_equipment = {
				    infantry_equipment > 1000
			    } 
		    }
		}
		cost = 50
		ai_will_do = {
			factor = 80
			modifier = {
				factor = 0
				has_country_flag = Weapon_purchase_underway 
			}
		}
		days_remove = 30
		complete_effect = {
			set_country_flag = { flag = Weapon_purchase_underway days = 32 value = 1 }
		}
		remove_effect = {
            GND = { 
				add_political_power = 50 
				send_equipment = {
					equipment = infantry_equipment
					amount = 1000
					target = ROOT
				}
		    }
		}		
	}
}
